<!doctype html>
<html lang="en-us">
  <head>
    <title>Git操作与命令 // 阿强的学习笔记</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.80.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="wangqiang" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://ko1a.github.io/css/main.min.4c1a909e6fe10d8fe1d9033af603c9b9a7803efa8046860032882a48f84a40f1.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Git操作与命令"/>
<meta name="twitter:description" content="一、创建与合并分支
1、 从master分支创建dev分支并切换到dev分支
git checkout mastergit checkout -b dev 其中，git checkout -b dev 等价于:
git branch devgit checkout dev （1）
git branch 查看本地当前的分支，分支前面带“*”表示当前分支，剩下的分支表示本地有的分支。
（2）
git branch -a 查看远程全部的分支，白色的表示本地有的，红色的表示本地没有，仅在远程存在。
2、修改代码、提交代码（当前的操作是在dev分支上进行）
git add a.html git commit -m &quot;提交文件a.html&quot; 3、分支合并(将dev合并到master)
git checkout master git merge dev 4、合并完成后，删除dev分支.(删除dev分支时，注意我们当前所在的分支不能是dev分支)
git branch -d dev 5、删除后，查看分支(此时看不到dev分支了)
git branch 6、总结 ：工作中经常从master创建新的分支，具体操作如下:
master创建新分支： git checkout master git checkout -b issues1234 // 从master分支创建issues1234分支 git push origin issues1234 git add .. git commit -m &quot;***&quot; git push origin issues1234  注意：将本地分支branch1推到远端的branch2操作步骤："/>

    <meta property="og:title" content="Git操作与命令" />
<meta property="og:description" content="一、创建与合并分支
1、 从master分支创建dev分支并切换到dev分支
git checkout mastergit checkout -b dev 其中，git checkout -b dev 等价于:
git branch devgit checkout dev （1）
git branch 查看本地当前的分支，分支前面带“*”表示当前分支，剩下的分支表示本地有的分支。
（2）
git branch -a 查看远程全部的分支，白色的表示本地有的，红色的表示本地没有，仅在远程存在。
2、修改代码、提交代码（当前的操作是在dev分支上进行）
git add a.html git commit -m &quot;提交文件a.html&quot; 3、分支合并(将dev合并到master)
git checkout master git merge dev 4、合并完成后，删除dev分支.(删除dev分支时，注意我们当前所在的分支不能是dev分支)
git branch -d dev 5、删除后，查看分支(此时看不到dev分支了)
git branch 6、总结 ：工作中经常从master创建新的分支，具体操作如下:
master创建新分支： git checkout master git checkout -b issues1234 // 从master分支创建issues1234分支 git push origin issues1234 git add .. git commit -m &quot;***&quot; git push origin issues1234  注意：将本地分支branch1推到远端的branch2操作步骤：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ko1a.github.io/post/git1/" />
<meta property="article:published_time" content="2020-09-12T15:02:31+08:00" />
<meta property="article:modified_time" content="2020-09-12T15:02:31+08:00" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://ko1a.github.io/"><img class="app-header-avatar" src="https://pic4.zhimg.com/80/v2-2f47aaadf2eef73c77a4497a67181854_1440w.jpg?source=1940ef5c" alt="wangqiang" /></a>
      <h1>阿强的学习笔记</h1>
      <p>go for it</p>
      <div class="app-header-social">
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Git操作与命令</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Sep 12, 2020
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
              <a class="tag" href="https://ko1a.github.io/tags/git/">Git</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <p><strong>一、创建与合并分支</strong></p>
<p><strong>1、 从master分支创建dev分支并切换到dev分支</strong></p>
<pre><code>git checkout mastergit checkout -b dev
</code></pre><p>其中，git checkout -b dev 等价于:</p>
<pre><code>git branch devgit checkout dev
</code></pre><p>（1）</p>
<pre><code>git branch
</code></pre><p>查看本地当前的分支，分支前面带“*”表示当前分支，剩下的分支表示本地有的分支。</p>
<p>（2）</p>
<pre><code>git  branch  -a
</code></pre><p>查看远程全部的分支，白色的表示本地有的，红色的表示本地没有，仅在远程存在。</p>
<p><strong>2、修改代码、提交代码（当前的操作是在dev分支上进行）</strong></p>
<pre><code>git add a.html
git commit -m &quot;提交文件a.html&quot;
</code></pre><p><strong>3、分支合并(将dev合并到master)</strong></p>
<pre><code>git checkout master
git merge dev
</code></pre><p><strong>4、合并完成后，删除dev分支.(删除dev分支时，注意我们当前所在的分支不能是dev分支)</strong></p>
<pre><code>git branch -d dev
</code></pre><p><strong>5、删除后，查看分支(此时看不到dev分支了)</strong></p>
<pre><code>git branch
</code></pre><p><strong>6、总结 ：工作中经常从master创建新的分支，具体操作如下:</strong></p>
<pre><code>master创建新分支：
git checkout master
git checkout -b  issues1234  // 从master分支创建issues1234分支
git push origin issues1234
git add ..
git commit -m &quot;***&quot;
git push origin issues1234
</code></pre><blockquote>
<p>注意：将本地分支branch1推到远端的branch2操作步骤：</p>
</blockquote>
<pre><code>git push origin branch1:branch2
</code></pre><p><strong>7、删除分支：</strong></p>
<pre><code>git branch -D   issues1234  // 本地强制删除分支issues1234
git push origin  :issues1234  // 推到远程
</code></pre><hr>
<p><strong>二、解决冲突</strong></p>
<p><strong>1、发生冲突的文件</strong></p>
<pre><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEADCreating a new branch is quick &amp; simple.=======Creating a new branch is quick AND simple.&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature1
</code></pre><p>其中，git使用 <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;，=======，&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>标记文件中自己和别人产生冲突的部分。</p>
<p>在 <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;，=======</code>之间为自己的代码；=======，&raquo;&raquo;&raquo;&gt;之间为别人的代码。</p>
<p>如果保留自己的代码，将别人的代码删掉即可。</p>
<p><strong>2、冲突解决后提交</strong></p>
<pre><code>git status
git add ***
git commit -m &quot;fix conflict&quot;
git push origin 分支名
</code></pre><hr>
<p><strong>三、Bug分支</strong></p>
<p><strong>1、储藏更改:将当前更改的代码储藏起来，等以后恢复使用</strong></p>
<pre><code>git stash
</code></pre><p><strong>2、恢复储藏的代码</strong></p>
<pre><code>git stash pop // 恢复的同时把stash内容删掉
</code></pre><p>或者</p>
<pre><code>// 通过 git stash list，查看本地所有的stash,如果我要恢复第一个就执行：git stash apply stash@{0}
git stash apply  // 恢复stash，但是stash内容并不删除
git stash drop // 在上面操作的基础上，以此来删除stash
注： git stash list // 查看全部的stash列表
</code></pre><p><strong>3、将stash空间清空</strong></p>
<pre><code>git stash clear
</code></pre><p><strong>4、git stash pop 和 git stash apply 区别</strong></p>
<pre><code>原来git stash pop stash@{id}命令会在执行后将对应的stash id 从stash list里删除，而 git stash apply stash@{id} 命令则会继续保存stash id。
</code></pre><hr>
<p><strong>四、版本回退</strong></p>
<p><strong>1、回退至上一个版本</strong></p>
<pre><code>git reset --hard HEAD
</code></pre><p><strong>2、回退至指定版本</strong></p>
<pre><code>git reset --hard  版本号
</code></pre><p><strong>3、查看以往版本号(本地的commit)</strong></p>
<pre><code>git reflog
</code></pre><p><strong>4、查看各版本号及信息(所有的commit：本地commit + 其他同事的commit)</strong></p>
<pre><code>git log
</code></pre><hr>
<p><strong>五、撤销修改</strong></p>
<p><strong>1、撤销修改</strong></p>
<pre><code>git  checkout -- a.html
</code></pre><blockquote>
<p>分两种情况分析：</p>
</blockquote>
<pre><code>①： 还没有执行 git add 操作，执行上面的操作后，会恢复到和版本库中一模一样的版本状态。
②： 执行了git add ，还没执行 git commit ,再执行上面的操作后，会恢复到git add 结束后的状态
</code></pre><blockquote>
<p>注：一旦执行了git commit -m &ldquo;*&quot;，就不能再使用上面的命令回退。</p>
</blockquote>
<p><strong>2、撤销新建文件</strong></p>
<p>比如新建一个aa.html页面，并未执行git add ,即没有被git追踪，此时如果你想撤销新建动作，可执行：</p>
<pre><code>git clean -f ../aa.html
</code></pre><p><strong>3、撤销新建文件夹</strong></p>
<p>比如新建一个文件夹&quot;demo&rdquo;，并未执行git add ,即没有被git追踪，此时如果你想撤销新建动作，可执行：</p>
<pre><code>git clean -df ./demo
</code></pre><hr>
<p><strong>六、对已push版本进行回退</strong></p>
<p><strong>1、第一步：</strong></p>
<pre><code>git reset --hard 版本号 // 本地回退到指定的版本
</code></pre><p><strong>2、第二步：</strong></p>
<pre><code>git push  -f origin dev    //将远程的也回退到指定版本
</code></pre><hr>
<p><strong>七、本地同步远程删除的分支</strong></p>
<pre><code>git fetch origin -p  // 用来清除已经没有远程信息的分支，这样git branch -a 就不会拉取远程已经删除的分支了
</code></pre><hr>
<p><strong>八、删掉未与远程分支对应的本地分支</strong></p>
<p>从gitlab上看不到的分支在本地可以通过git branch -a 查到，删掉没有与远程分支对应的本地分支：</p>
<pre><code>git fetch -p
</code></pre><hr>
<p><strong>九、查看远程库与本地分支的信息</strong></p>
<pre><code>git remote show origin
</code></pre><hr>
<p><strong>十、标签管理</strong></p>
<p><strong>1、给当前分支最新commit打标签</strong></p>
<pre><code>git tag v1.0.0
</code></pre><p><strong>2、比如现在周五，要给周一某个commit打标签，应执行以下步骤：</strong></p>
<p>（1）、查看log日志，找到相应的commit版本号</p>
<pre><code>git log --pretty=oneline --abbrev-commit
// 显示如下commit，比如我想在 &quot;34372b05&quot;这个commit打标签44d2e20b fix bug34372b05 fix bug29554931 fix bug
</code></pre><p>（2）、给指定的commit打标签</p>
<pre><code>git tag v1.0.0 34372b05
</code></pre><p>（3）、创建的标签只存在本地，推至远程</p>
<pre><code>git push origin v1.0.0
</code></pre><p>（4）、一次性推送未推至远程的本地标签</p>
<pre><code>git push origin --tags
</code></pre><p>（5）、查询所有标签</p>
<pre><code>git tag
</code></pre><p>（6）、查询标签详细信息</p>
<pre><code>git show v1.0.0
</code></pre><p>（7）、删除本地标签</p>
<pre><code>git tag -d v1.0.0
</code></pre><p>（8）、删除远程标签</p>
<pre><code>// 先从本地删除git tag -d v1.0.0
// 然后从远程删除git push origin :refs/tags/v1.0.0
// 最后可以在gitlab上查看是否真正的删除了标签
</code></pre><p><strong>3、创建带有说明的标签，用-a指定标签名，-m指定说明文字</strong></p>
<pre><code>// git  tag  -a  版本号  -m  说明信息  commit版本号git tag -a v1.0.0 -m &quot;version 1.0.0 released&quot; 34372b05(commit版本号)     
// 查看标签详细信息git show v1.0.0    
</code></pre><hr>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
